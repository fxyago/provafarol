{"ast":null,"code":"import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.dot-all.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.join.js\";\n\nvar _watch;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport { Vue } from '../../vue';\nimport { NAME_FORM_FILE } from '../../constants/components';\nimport { HAS_PROMISE_SUPPORT } from '../../constants/env';\nimport { EVENT_NAME_CHANGE, EVENT_OPTIONS_PASSIVE } from '../../constants/events';\nimport { PROP_TYPE_ARRAY, PROP_TYPE_BOOLEAN, PROP_TYPE_FUNCTION, PROP_TYPE_STRING } from '../../constants/props';\nimport { SLOT_NAME_DROP_PLACEHOLDER, SLOT_NAME_FILE_NAME, SLOT_NAME_PLACEHOLDER } from '../../constants/slots';\nimport { RX_EXTENSION, RX_STAR } from '../../constants/regex';\nimport { File } from '../../constants/safe-types';\nimport { from as arrayFrom, flatten, flattenDeep } from '../../utils/array';\nimport { cloneDeep } from '../../utils/clone-deep';\nimport { closest } from '../../utils/dom';\nimport { eventOn, eventOff, stopEvent } from '../../utils/events';\nimport { identity } from '../../utils/identity';\nimport { isArray, isFile, isFunction, isNull, isUndefinedOrNull } from '../../utils/inspect';\nimport { looseEqual } from '../../utils/loose-equal';\nimport { makeModelMixin } from '../../utils/model';\nimport { sortKeys } from '../../utils/object';\nimport { hasPropFunction, makeProp, makePropsConfigurable } from '../../utils/props';\nimport { escapeRegExp } from '../../utils/string';\nimport { warn } from '../../utils/warn';\nimport { attrsMixin } from '../../mixins/attrs';\nimport { formControlMixin, props as formControlProps } from '../../mixins/form-control';\nimport { formCustomMixin, props as formCustomProps } from '../../mixins/form-custom';\nimport { formStateMixin, props as formStateProps } from '../../mixins/form-state';\nimport { idMixin, props as idProps } from '../../mixins/id';\nimport { normalizeSlotMixin } from '../../mixins/normalize-slot';\nimport { props as formSizeProps } from '../../mixins/form-size'; // --- Constants ---\n\nvar _makeModelMixin = makeModelMixin('value', {\n  type: [PROP_TYPE_ARRAY, File],\n  defaultValue: null,\n  validator: function validator(value) {\n    /* istanbul ignore next */\n    if (value === '') {\n      warn(VALUE_EMPTY_DEPRECATED_MSG, NAME_FORM_FILE);\n      return true;\n    }\n\n    return isUndefinedOrNull(value) || isValidValue(value);\n  }\n}),\n    modelMixin = _makeModelMixin.mixin,\n    modelProps = _makeModelMixin.props,\n    MODEL_PROP_NAME = _makeModelMixin.prop,\n    MODEL_EVENT_NAME = _makeModelMixin.event;\n\nvar VALUE_EMPTY_DEPRECATED_MSG = 'Setting \"value\"/\"v-model\" to an empty string for reset is deprecated. Set to \"null\" instead.'; // --- Helper methods ---\n\nvar isValidValue = function isValidValue(value) {\n  return isFile(value) || isArray(value) && value.every(function (v) {\n    return isValidValue(v);\n  });\n}; // Helper method to \"safely\" get the entry from a data-transfer item\n\n/* istanbul ignore next: not supported in JSDOM */\n\n\nvar getDataTransferItemEntry = function getDataTransferItemEntry(item) {\n  return isFunction(item.getAsEntry) ? item.getAsEntry() : isFunction(item.webkitGetAsEntry) ? item.webkitGetAsEntry() : null;\n}; // Drop handler function to get all files\n\n/* istanbul ignore next: not supported in JSDOM */\n\n\nvar getAllFileEntries = function getAllFileEntries(dataTransferItemList) {\n  var traverseDirectories = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return Promise.all(arrayFrom(dataTransferItemList).filter(function (item) {\n    return item.kind === 'file';\n  }).map(function (item) {\n    var entry = getDataTransferItemEntry(item);\n\n    if (entry) {\n      if (entry.isDirectory && traverseDirectories) {\n        return getAllFileEntriesInDirectory(entry.createReader(), \"\".concat(entry.name, \"/\"));\n      } else if (entry.isFile) {\n        return new Promise(function (resolve) {\n          entry.file(function (file) {\n            file.$path = '';\n            resolve(file);\n          });\n        });\n      }\n    }\n\n    return null;\n  }).filter(identity));\n}; // Get all the file entries (recursive) in a directory\n\n/* istanbul ignore next: not supported in JSDOM */\n\n\nvar getAllFileEntriesInDirectory = function getAllFileEntriesInDirectory(directoryReader) {\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return new Promise(function (resolve) {\n    var entryPromises = [];\n\n    var readDirectoryEntries = function readDirectoryEntries() {\n      directoryReader.readEntries(function (entries) {\n        if (entries.length === 0) {\n          resolve(Promise.all(entryPromises).then(function (entries) {\n            return flatten(entries);\n          }));\n        } else {\n          entryPromises.push(Promise.all(entries.map(function (entry) {\n            if (entry) {\n              if (entry.isDirectory) {\n                return getAllFileEntriesInDirectory(entry.createReader(), \"\".concat(path).concat(entry.name, \"/\"));\n              } else if (entry.isFile) {\n                return new Promise(function (resolve) {\n                  entry.file(function (file) {\n                    file.$path = \"\".concat(path).concat(file.name);\n                    resolve(file);\n                  });\n                });\n              }\n            }\n\n            return null;\n          }).filter(identity)));\n          readDirectoryEntries();\n        }\n      });\n    };\n\n    readDirectoryEntries();\n  });\n}; // --- Props ---\n\n\nvar props = makePropsConfigurable(sortKeys(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, idProps), modelProps), formControlProps), formCustomProps), formStateProps), formSizeProps), {}, {\n  accept: makeProp(PROP_TYPE_STRING, ''),\n  browseText: makeProp(PROP_TYPE_STRING, 'Browse'),\n  // Instruct input to capture from camera\n  capture: makeProp(PROP_TYPE_BOOLEAN, false),\n  directory: makeProp(PROP_TYPE_BOOLEAN, false),\n  dropPlaceholder: makeProp(PROP_TYPE_STRING, 'Drop files here'),\n  fileNameFormatter: makeProp(PROP_TYPE_FUNCTION),\n  multiple: makeProp(PROP_TYPE_BOOLEAN, false),\n  noDrop: makeProp(PROP_TYPE_BOOLEAN, false),\n  noDropPlaceholder: makeProp(PROP_TYPE_STRING, 'Not allowed'),\n  // TODO:\n  //   Should we deprecate this and only support flat file structures?\n  //   Nested file structures are only supported when files are dropped\n  //   A Chromium \"bug\" prevents `webkitEntries` from being populated\n  //   on the file input's `change` event and is marked as \"WontFix\"\n  //   Mozilla implemented the behavior the same way as Chromium\n  //   See: https://bugs.chromium.org/p/chromium/issues/detail?id=138987\n  //   See: https://bugzilla.mozilla.org/show_bug.cgi?id=1326031\n  noTraverse: makeProp(PROP_TYPE_BOOLEAN, false),\n  placeholder: makeProp(PROP_TYPE_STRING, 'No file chosen')\n})), NAME_FORM_FILE); // --- Main component ---\n// @vue/component\n\nexport var BFormFile = /*#__PURE__*/Vue.extend({\n  name: NAME_FORM_FILE,\n  mixins: [attrsMixin, idMixin, modelMixin, normalizeSlotMixin, formControlMixin, formStateMixin, formCustomMixin, normalizeSlotMixin],\n  inheritAttrs: false,\n  props: props,\n  data: function data() {\n    return {\n      files: [],\n      dragging: false,\n      // IE 11 doesn't respect setting `event.dataTransfer.dropEffect`,\n      // so we handle it ourselves as well\n      // https://stackoverflow.com/a/46915971/2744776\n      dropAllowed: !this.noDrop,\n      hasFocus: false\n    };\n  },\n  computed: {\n    // Convert `accept` to an array of `[{ RegExpr, isMime }, ...]`\n    computedAccept: function computedAccept() {\n      var accept = this.accept;\n      accept = (accept || '').trim().split(/[,\\s]+/).filter(identity); // Allow any file type/extension\n\n      if (accept.length === 0) {\n        return null;\n      }\n\n      return accept.map(function (extOrType) {\n        var prop = 'name';\n        var startMatch = '^';\n        var endMatch = '$';\n\n        if (RX_EXTENSION.test(extOrType)) {\n          // File extension /\\.ext$/\n          startMatch = '';\n        } else {\n          // MIME type /^mime\\/.+$/ or /^mime\\/type$/\n          prop = 'type';\n\n          if (RX_STAR.test(extOrType)) {\n            endMatch = '.+$'; // Remove trailing `*`\n\n            extOrType = extOrType.slice(0, -1);\n          }\n        } // Escape all RegExp special chars\n\n\n        extOrType = escapeRegExp(extOrType);\n        var rx = new RegExp(\"\".concat(startMatch).concat(extOrType).concat(endMatch));\n        return {\n          rx: rx,\n          prop: prop\n        };\n      });\n    },\n    computedCapture: function computedCapture() {\n      var capture = this.capture;\n      return capture === true || capture === '' ? true : capture || null;\n    },\n    computedAttrs: function computedAttrs() {\n      var name = this.name,\n          disabled = this.disabled,\n          required = this.required,\n          form = this.form,\n          computedCapture = this.computedCapture,\n          accept = this.accept,\n          multiple = this.multiple,\n          directory = this.directory;\n      return _objectSpread(_objectSpread({}, this.bvAttrs), {}, {\n        type: 'file',\n        id: this.safeId(),\n        name: name,\n        disabled: disabled,\n        required: required,\n        form: form || null,\n        capture: computedCapture,\n        accept: accept || null,\n        multiple: multiple,\n        directory: directory,\n        webkitdirectory: directory,\n        'aria-required': required ? 'true' : null\n      });\n    },\n    computedFileNameFormatter: function computedFileNameFormatter() {\n      var fileNameFormatter = this.fileNameFormatter;\n      return hasPropFunction(fileNameFormatter) ? fileNameFormatter : this.defaultFileNameFormatter;\n    },\n    clonedFiles: function clonedFiles() {\n      return cloneDeep(this.files);\n    },\n    flattenedFiles: function flattenedFiles() {\n      return flattenDeep(this.files);\n    },\n    fileNames: function fileNames() {\n      return this.flattenedFiles.map(function (file) {\n        return file.name;\n      });\n    },\n    labelContent: function labelContent() {\n      // Draging active\n\n      /* istanbul ignore next: used by drag/drop which can't be tested easily */\n      if (this.dragging && !this.noDrop) {\n        return (// TODO: Add additional scope with file count, and other not-allowed reasons\n          this.normalizeSlot(SLOT_NAME_DROP_PLACEHOLDER, {\n            allowed: this.dropAllowed\n          }) || (this.dropAllowed ? this.dropPlaceholder : this.$createElement('span', {\n            staticClass: 'text-danger'\n          }, this.noDropPlaceholder))\n        );\n      } // No file chosen\n\n\n      if (this.files.length === 0) {\n        return this.normalizeSlot(SLOT_NAME_PLACEHOLDER) || this.placeholder;\n      }\n\n      var flattenedFiles = this.flattenedFiles,\n          clonedFiles = this.clonedFiles,\n          fileNames = this.fileNames,\n          computedFileNameFormatter = this.computedFileNameFormatter; // There is a slot for formatting the files/names\n\n      if (this.hasNormalizedSlot(SLOT_NAME_FILE_NAME)) {\n        return this.normalizeSlot(SLOT_NAME_FILE_NAME, {\n          files: flattenedFiles,\n          filesTraversed: clonedFiles,\n          names: fileNames\n        });\n      }\n\n      return computedFileNameFormatter(flattenedFiles, clonedFiles, fileNames);\n    }\n  },\n  watch: (_watch = {}, _defineProperty(_watch, MODEL_PROP_NAME, function (newValue) {\n    if (!newValue || isArray(newValue) && newValue.length === 0) {\n      this.reset();\n    }\n  }), _defineProperty(_watch, \"files\", function files(newValue, oldValue) {\n    if (!looseEqual(newValue, oldValue)) {\n      var multiple = this.multiple,\n          noTraverse = this.noTraverse;\n      var files = !multiple || noTraverse ? flattenDeep(newValue) : newValue;\n      this.$emit(MODEL_EVENT_NAME, multiple ? files : files[0] || null);\n    }\n  }), _watch),\n  created: function created() {\n    // Create private non-reactive props\n    this.$_form = null;\n  },\n  mounted: function mounted() {\n    // Listen for form reset events, to reset the file input\n    var $form = closest('form', this.$el);\n\n    if ($form) {\n      eventOn($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n      this.$_form = $form;\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    var $form = this.$_form;\n\n    if ($form) {\n      eventOff($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n    }\n  },\n  methods: {\n    isFileValid: function isFileValid(file) {\n      if (!file) {\n        return false;\n      }\n\n      var accept = this.computedAccept;\n      return accept ? accept.some(function (a) {\n        return a.rx.test(file[a.prop]);\n      }) : true;\n    },\n    isFilesArrayValid: function isFilesArrayValid(files) {\n      var _this = this;\n\n      return isArray(files) ? files.every(function (file) {\n        return _this.isFileValid(file);\n      }) : this.isFileValid(files);\n    },\n    defaultFileNameFormatter: function defaultFileNameFormatter(flattenedFiles, clonedFiles, fileNames) {\n      return fileNames.join(', ');\n    },\n    setFiles: function setFiles(files) {\n      // Reset the dragging flags\n      this.dropAllowed = !this.noDrop;\n      this.dragging = false; // Set the selected files\n\n      this.files = this.multiple ? this.directory ? files : flattenDeep(files) : flattenDeep(files).slice(0, 1);\n    },\n\n    /* istanbul ignore next: used by Drag/Drop */\n    setInputFiles: function setInputFiles(files) {\n      // Try an set the file input files array so that `required`\n      // constraint works for dropped files (will fail in IE11 though)\n      // To be used only when dropping files\n      try {\n        // Firefox < 62 workaround exploiting https://bugzilla.mozilla.org/show_bug.cgi?id=1422655\n        var dataTransfer = new ClipboardEvent('').clipboardData || new DataTransfer(); // Add flattened files to temp `dataTransfer` object to get a true `FileList` array\n\n        flattenDeep(cloneDeep(files)).forEach(function (file) {\n          // Make sure to remove the custom `$path` attribute\n          delete file.$path;\n          dataTransfer.items.add(file);\n        });\n        this.$refs.input.files = dataTransfer.files;\n      } catch (_unused) {}\n    },\n    reset: function reset() {\n      // IE 11 doesn't support setting `$input.value` to `''` or `null`\n      // So we use this little extra hack to reset the value, just in case\n      // This also appears to work on modern browsers as well\n      // Wrapped in try in case IE 11 or mobile Safari crap out\n      try {\n        var $input = this.$refs.input;\n        $input.value = '';\n        $input.type = '';\n        $input.type = 'file';\n      } catch (_unused2) {}\n\n      this.files = [];\n    },\n    handleFiles: function handleFiles(files) {\n      var isDrop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (isDrop) {\n        // When dropped, make sure to filter files with the internal `accept` logic\n        var filteredFiles = files.filter(this.isFilesArrayValid); // Only update files when we have any after filtering\n\n        if (filteredFiles.length > 0) {\n          this.setFiles(filteredFiles); // Try an set the file input's files array so that `required`\n          // constraint works for dropped files (will fail in IE 11 though)\n\n          this.setInputFiles(filteredFiles);\n        }\n      } else {\n        // We always update the files from the `change` event\n        this.setFiles(files);\n      }\n    },\n    focusHandler: function focusHandler(event) {\n      // Bootstrap v4 doesn't have focus styling for custom file input\n      // Firefox has a `[type=file]:focus ~ sibling` selector issue,\n      // so we add a `focus` class to get around these bugs\n      if (this.plain || event.type === 'focusout') {\n        this.hasFocus = false;\n      } else {\n        // Add focus styling for custom file input\n        this.hasFocus = true;\n      }\n    },\n    onChange: function onChange(event) {\n      var _this2 = this;\n\n      var type = event.type,\n          target = event.target,\n          _event$dataTransfer = event.dataTransfer,\n          dataTransfer = _event$dataTransfer === void 0 ? {} : _event$dataTransfer;\n      var isDrop = type === 'drop'; // Always emit original event\n\n      this.$emit(EVENT_NAME_CHANGE, event);\n      var items = arrayFrom(dataTransfer.items || []);\n\n      if (HAS_PROMISE_SUPPORT && items.length > 0 && !isNull(getDataTransferItemEntry(items[0]))) {\n        // Drop handling for modern browsers\n        // Supports nested directory structures in `directory` mode\n\n        /* istanbul ignore next: not supported in JSDOM */\n        getAllFileEntries(items, this.directory).then(function (files) {\n          return _this2.handleFiles(files, isDrop);\n        });\n      } else {\n        // Standard file input handling (native file input change event),\n        // or fallback drop mode (IE 11 / Opera) which don't support `directory` mode\n        var files = arrayFrom(target.files || dataTransfer.files || []).map(function (file) {\n          // Add custom `$path` property to each file (to be consistent with drop mode)\n          file.$path = file.webkitRelativePath || '';\n          return file;\n        });\n        this.handleFiles(files, isDrop);\n      }\n    },\n    onDragenter: function onDragenter(event) {\n      stopEvent(event);\n      this.dragging = true;\n      var _event$dataTransfer2 = event.dataTransfer,\n          dataTransfer = _event$dataTransfer2 === void 0 ? {} : _event$dataTransfer2; // Early exit when the input or dropping is disabled\n\n      if (this.noDrop || this.disabled || !this.dropAllowed) {\n        // Show deny feedback\n\n        /* istanbul ignore next: not supported in JSDOM */\n        dataTransfer.dropEffect = 'none';\n        this.dropAllowed = false;\n        return;\n      }\n      /* istanbul ignore next: not supported in JSDOM */\n\n\n      dataTransfer.dropEffect = 'copy';\n    },\n    // Note this event fires repeatedly while the mouse is over the dropzone at\n    // intervals in the milliseconds, so avoid doing much processing in here\n    onDragover: function onDragover(event) {\n      stopEvent(event);\n      this.dragging = true;\n      var _event$dataTransfer3 = event.dataTransfer,\n          dataTransfer = _event$dataTransfer3 === void 0 ? {} : _event$dataTransfer3; // Early exit when the input or dropping is disabled\n\n      if (this.noDrop || this.disabled || !this.dropAllowed) {\n        // Show deny feedback\n\n        /* istanbul ignore next: not supported in JSDOM */\n        dataTransfer.dropEffect = 'none';\n        this.dropAllowed = false;\n        return;\n      }\n      /* istanbul ignore next: not supported in JSDOM */\n\n\n      dataTransfer.dropEffect = 'copy';\n    },\n    onDragleave: function onDragleave(event) {\n      var _this3 = this;\n\n      stopEvent(event);\n      this.$nextTick(function () {\n        _this3.dragging = false; // Reset `dropAllowed` to default\n\n        _this3.dropAllowed = !_this3.noDrop;\n      });\n    },\n    // Triggered by a file drop onto drop target\n    onDrop: function onDrop(event) {\n      var _this4 = this;\n\n      stopEvent(event);\n      this.dragging = false; // Early exit when the input or dropping is disabled\n\n      if (this.noDrop || this.disabled || !this.dropAllowed) {\n        this.$nextTick(function () {\n          // Reset `dropAllowed` to default\n          _this4.dropAllowed = !_this4.noDrop;\n        });\n        return;\n      }\n\n      this.onChange(event);\n    }\n  },\n  render: function render(h) {\n    var custom = this.custom,\n        plain = this.plain,\n        size = this.size,\n        dragging = this.dragging,\n        stateClass = this.stateClass,\n        bvAttrs = this.bvAttrs; // Form Input\n\n    var $input = h('input', {\n      class: [{\n        'form-control-file': plain,\n        'custom-file-input': custom,\n        focus: custom && this.hasFocus\n      }, stateClass],\n      // With IE 11, the input gets in the \"way\" of the drop events,\n      // so we move it out of the way by putting it behind the label\n      // Bootstrap v4 has it in front\n      style: custom ? {\n        zIndex: -5\n      } : {},\n      attrs: this.computedAttrs,\n      on: {\n        change: this.onChange,\n        focusin: this.focusHandler,\n        focusout: this.focusHandler,\n        reset: this.reset\n      },\n      ref: 'input'\n    });\n\n    if (plain) {\n      return $input;\n    } // Overlay label\n\n\n    var $label = h('label', {\n      staticClass: 'custom-file-label',\n      class: {\n        dragging: dragging\n      },\n      attrs: {\n        for: this.safeId(),\n        // This goes away in Bootstrap v5\n        'data-browse': this.browseText || null\n      }\n    }, [h('span', {\n      staticClass: 'd-block form-file-text',\n      // `pointer-events: none` is used to make sure\n      // the drag events fire only on the label\n      style: {\n        pointerEvents: 'none'\n      }\n    }, [this.labelContent])]); // Return rendered custom file input\n\n    return h('div', {\n      staticClass: 'custom-file b-form-file',\n      class: [_defineProperty({}, \"b-custom-control-\".concat(size), size), stateClass, bvAttrs.class],\n      style: bvAttrs.style,\n      attrs: {\n        id: this.safeId('_BV_file_outer_')\n      },\n      on: {\n        dragenter: this.onDragenter,\n        dragover: this.onDragover,\n        dragleave: this.onDragleave,\n        drop: this.onDrop\n      }\n    }, [$input, $label]);\n  }\n});","map":{"version":3,"sources":["C:/Users/Yago/Documents/Eclipse/Yago/farolshopping/src/frontend/farolshopping/node_modules/bootstrap-vue/esm/components/form-file/form-file.js"],"names":["_watch","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","Vue","NAME_FORM_FILE","HAS_PROMISE_SUPPORT","EVENT_NAME_CHANGE","EVENT_OPTIONS_PASSIVE","PROP_TYPE_ARRAY","PROP_TYPE_BOOLEAN","PROP_TYPE_FUNCTION","PROP_TYPE_STRING","SLOT_NAME_DROP_PLACEHOLDER","SLOT_NAME_FILE_NAME","SLOT_NAME_PLACEHOLDER","RX_EXTENSION","RX_STAR","File","from","arrayFrom","flatten","flattenDeep","cloneDeep","closest","eventOn","eventOff","stopEvent","identity","isArray","isFile","isFunction","isNull","isUndefinedOrNull","looseEqual","makeModelMixin","sortKeys","hasPropFunction","makeProp","makePropsConfigurable","escapeRegExp","warn","attrsMixin","formControlMixin","props","formControlProps","formCustomMixin","formCustomProps","formStateMixin","formStateProps","idMixin","idProps","normalizeSlotMixin","formSizeProps","_makeModelMixin","type","defaultValue","validator","VALUE_EMPTY_DEPRECATED_MSG","isValidValue","modelMixin","mixin","modelProps","MODEL_PROP_NAME","prop","MODEL_EVENT_NAME","event","every","v","getDataTransferItemEntry","item","getAsEntry","webkitGetAsEntry","getAllFileEntries","dataTransferItemList","traverseDirectories","undefined","Promise","all","kind","map","entry","isDirectory","getAllFileEntriesInDirectory","createReader","concat","name","resolve","file","$path","directoryReader","path","entryPromises","readDirectoryEntries","readEntries","entries","then","accept","browseText","capture","directory","dropPlaceholder","fileNameFormatter","multiple","noDrop","noDropPlaceholder","noTraverse","placeholder","BFormFile","extend","mixins","inheritAttrs","data","files","dragging","dropAllowed","hasFocus","computed","computedAccept","trim","split","extOrType","startMatch","endMatch","test","slice","rx","RegExp","computedCapture","computedAttrs","disabled","required","form","bvAttrs","id","safeId","webkitdirectory","computedFileNameFormatter","defaultFileNameFormatter","clonedFiles","flattenedFiles","fileNames","labelContent","normalizeSlot","allowed","$createElement","staticClass","hasNormalizedSlot","filesTraversed","names","watch","newValue","reset","oldValue","$emit","created","$_form","mounted","$form","$el","beforeDestroy","methods","isFileValid","some","a","isFilesArrayValid","_this","join","setFiles","setInputFiles","dataTransfer","ClipboardEvent","clipboardData","DataTransfer","items","add","$refs","input","_unused","$input","_unused2","handleFiles","isDrop","filteredFiles","focusHandler","plain","onChange","_this2","_event$dataTransfer","webkitRelativePath","onDragenter","_event$dataTransfer2","dropEffect","onDragover","_event$dataTransfer3","onDragleave","_this3","$nextTick","onDrop","_this4","render","h","custom","size","stateClass","class","focus","style","zIndex","attrs","on","change","focusin","focusout","ref","$label","for","pointerEvents","dragenter","dragover","dragleave","drop"],"mappings":"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","sourcesContent":["var _watch;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Vue } from '../../vue';\nimport { NAME_FORM_FILE } from '../../constants/components';\nimport { HAS_PROMISE_SUPPORT } from '../../constants/env';\nimport { EVENT_NAME_CHANGE, EVENT_OPTIONS_PASSIVE } from '../../constants/events';\nimport { PROP_TYPE_ARRAY, PROP_TYPE_BOOLEAN, PROP_TYPE_FUNCTION, PROP_TYPE_STRING } from '../../constants/props';\nimport { SLOT_NAME_DROP_PLACEHOLDER, SLOT_NAME_FILE_NAME, SLOT_NAME_PLACEHOLDER } from '../../constants/slots';\nimport { RX_EXTENSION, RX_STAR } from '../../constants/regex';\nimport { File } from '../../constants/safe-types';\nimport { from as arrayFrom, flatten, flattenDeep } from '../../utils/array';\nimport { cloneDeep } from '../../utils/clone-deep';\nimport { closest } from '../../utils/dom';\nimport { eventOn, eventOff, stopEvent } from '../../utils/events';\nimport { identity } from '../../utils/identity';\nimport { isArray, isFile, isFunction, isNull, isUndefinedOrNull } from '../../utils/inspect';\nimport { looseEqual } from '../../utils/loose-equal';\nimport { makeModelMixin } from '../../utils/model';\nimport { sortKeys } from '../../utils/object';\nimport { hasPropFunction, makeProp, makePropsConfigurable } from '../../utils/props';\nimport { escapeRegExp } from '../../utils/string';\nimport { warn } from '../../utils/warn';\nimport { attrsMixin } from '../../mixins/attrs';\nimport { formControlMixin, props as formControlProps } from '../../mixins/form-control';\nimport { formCustomMixin, props as formCustomProps } from '../../mixins/form-custom';\nimport { formStateMixin, props as formStateProps } from '../../mixins/form-state';\nimport { idMixin, props as idProps } from '../../mixins/id';\nimport { normalizeSlotMixin } from '../../mixins/normalize-slot';\nimport { props as formSizeProps } from '../../mixins/form-size'; // --- Constants ---\n\nvar _makeModelMixin = makeModelMixin('value', {\n  type: [PROP_TYPE_ARRAY, File],\n  defaultValue: null,\n  validator: function validator(value) {\n    /* istanbul ignore next */\n    if (value === '') {\n      warn(VALUE_EMPTY_DEPRECATED_MSG, NAME_FORM_FILE);\n      return true;\n    }\n\n    return isUndefinedOrNull(value) || isValidValue(value);\n  }\n}),\n    modelMixin = _makeModelMixin.mixin,\n    modelProps = _makeModelMixin.props,\n    MODEL_PROP_NAME = _makeModelMixin.prop,\n    MODEL_EVENT_NAME = _makeModelMixin.event;\n\nvar VALUE_EMPTY_DEPRECATED_MSG = 'Setting \"value\"/\"v-model\" to an empty string for reset is deprecated. Set to \"null\" instead.'; // --- Helper methods ---\n\nvar isValidValue = function isValidValue(value) {\n  return isFile(value) || isArray(value) && value.every(function (v) {\n    return isValidValue(v);\n  });\n}; // Helper method to \"safely\" get the entry from a data-transfer item\n\n/* istanbul ignore next: not supported in JSDOM */\n\n\nvar getDataTransferItemEntry = function getDataTransferItemEntry(item) {\n  return isFunction(item.getAsEntry) ? item.getAsEntry() : isFunction(item.webkitGetAsEntry) ? item.webkitGetAsEntry() : null;\n}; // Drop handler function to get all files\n\n/* istanbul ignore next: not supported in JSDOM */\n\n\nvar getAllFileEntries = function getAllFileEntries(dataTransferItemList) {\n  var traverseDirectories = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return Promise.all(arrayFrom(dataTransferItemList).filter(function (item) {\n    return item.kind === 'file';\n  }).map(function (item) {\n    var entry = getDataTransferItemEntry(item);\n\n    if (entry) {\n      if (entry.isDirectory && traverseDirectories) {\n        return getAllFileEntriesInDirectory(entry.createReader(), \"\".concat(entry.name, \"/\"));\n      } else if (entry.isFile) {\n        return new Promise(function (resolve) {\n          entry.file(function (file) {\n            file.$path = '';\n            resolve(file);\n          });\n        });\n      }\n    }\n\n    return null;\n  }).filter(identity));\n}; // Get all the file entries (recursive) in a directory\n\n/* istanbul ignore next: not supported in JSDOM */\n\n\nvar getAllFileEntriesInDirectory = function getAllFileEntriesInDirectory(directoryReader) {\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return new Promise(function (resolve) {\n    var entryPromises = [];\n\n    var readDirectoryEntries = function readDirectoryEntries() {\n      directoryReader.readEntries(function (entries) {\n        if (entries.length === 0) {\n          resolve(Promise.all(entryPromises).then(function (entries) {\n            return flatten(entries);\n          }));\n        } else {\n          entryPromises.push(Promise.all(entries.map(function (entry) {\n            if (entry) {\n              if (entry.isDirectory) {\n                return getAllFileEntriesInDirectory(entry.createReader(), \"\".concat(path).concat(entry.name, \"/\"));\n              } else if (entry.isFile) {\n                return new Promise(function (resolve) {\n                  entry.file(function (file) {\n                    file.$path = \"\".concat(path).concat(file.name);\n                    resolve(file);\n                  });\n                });\n              }\n            }\n\n            return null;\n          }).filter(identity)));\n          readDirectoryEntries();\n        }\n      });\n    };\n\n    readDirectoryEntries();\n  });\n}; // --- Props ---\n\n\nvar props = makePropsConfigurable(sortKeys(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, idProps), modelProps), formControlProps), formCustomProps), formStateProps), formSizeProps), {}, {\n  accept: makeProp(PROP_TYPE_STRING, ''),\n  browseText: makeProp(PROP_TYPE_STRING, 'Browse'),\n  // Instruct input to capture from camera\n  capture: makeProp(PROP_TYPE_BOOLEAN, false),\n  directory: makeProp(PROP_TYPE_BOOLEAN, false),\n  dropPlaceholder: makeProp(PROP_TYPE_STRING, 'Drop files here'),\n  fileNameFormatter: makeProp(PROP_TYPE_FUNCTION),\n  multiple: makeProp(PROP_TYPE_BOOLEAN, false),\n  noDrop: makeProp(PROP_TYPE_BOOLEAN, false),\n  noDropPlaceholder: makeProp(PROP_TYPE_STRING, 'Not allowed'),\n  // TODO:\n  //   Should we deprecate this and only support flat file structures?\n  //   Nested file structures are only supported when files are dropped\n  //   A Chromium \"bug\" prevents `webkitEntries` from being populated\n  //   on the file input's `change` event and is marked as \"WontFix\"\n  //   Mozilla implemented the behavior the same way as Chromium\n  //   See: https://bugs.chromium.org/p/chromium/issues/detail?id=138987\n  //   See: https://bugzilla.mozilla.org/show_bug.cgi?id=1326031\n  noTraverse: makeProp(PROP_TYPE_BOOLEAN, false),\n  placeholder: makeProp(PROP_TYPE_STRING, 'No file chosen')\n})), NAME_FORM_FILE); // --- Main component ---\n// @vue/component\n\nexport var BFormFile = /*#__PURE__*/Vue.extend({\n  name: NAME_FORM_FILE,\n  mixins: [attrsMixin, idMixin, modelMixin, normalizeSlotMixin, formControlMixin, formStateMixin, formCustomMixin, normalizeSlotMixin],\n  inheritAttrs: false,\n  props: props,\n  data: function data() {\n    return {\n      files: [],\n      dragging: false,\n      // IE 11 doesn't respect setting `event.dataTransfer.dropEffect`,\n      // so we handle it ourselves as well\n      // https://stackoverflow.com/a/46915971/2744776\n      dropAllowed: !this.noDrop,\n      hasFocus: false\n    };\n  },\n  computed: {\n    // Convert `accept` to an array of `[{ RegExpr, isMime }, ...]`\n    computedAccept: function computedAccept() {\n      var accept = this.accept;\n      accept = (accept || '').trim().split(/[,\\s]+/).filter(identity); // Allow any file type/extension\n\n      if (accept.length === 0) {\n        return null;\n      }\n\n      return accept.map(function (extOrType) {\n        var prop = 'name';\n        var startMatch = '^';\n        var endMatch = '$';\n\n        if (RX_EXTENSION.test(extOrType)) {\n          // File extension /\\.ext$/\n          startMatch = '';\n        } else {\n          // MIME type /^mime\\/.+$/ or /^mime\\/type$/\n          prop = 'type';\n\n          if (RX_STAR.test(extOrType)) {\n            endMatch = '.+$'; // Remove trailing `*`\n\n            extOrType = extOrType.slice(0, -1);\n          }\n        } // Escape all RegExp special chars\n\n\n        extOrType = escapeRegExp(extOrType);\n        var rx = new RegExp(\"\".concat(startMatch).concat(extOrType).concat(endMatch));\n        return {\n          rx: rx,\n          prop: prop\n        };\n      });\n    },\n    computedCapture: function computedCapture() {\n      var capture = this.capture;\n      return capture === true || capture === '' ? true : capture || null;\n    },\n    computedAttrs: function computedAttrs() {\n      var name = this.name,\n          disabled = this.disabled,\n          required = this.required,\n          form = this.form,\n          computedCapture = this.computedCapture,\n          accept = this.accept,\n          multiple = this.multiple,\n          directory = this.directory;\n      return _objectSpread(_objectSpread({}, this.bvAttrs), {}, {\n        type: 'file',\n        id: this.safeId(),\n        name: name,\n        disabled: disabled,\n        required: required,\n        form: form || null,\n        capture: computedCapture,\n        accept: accept || null,\n        multiple: multiple,\n        directory: directory,\n        webkitdirectory: directory,\n        'aria-required': required ? 'true' : null\n      });\n    },\n    computedFileNameFormatter: function computedFileNameFormatter() {\n      var fileNameFormatter = this.fileNameFormatter;\n      return hasPropFunction(fileNameFormatter) ? fileNameFormatter : this.defaultFileNameFormatter;\n    },\n    clonedFiles: function clonedFiles() {\n      return cloneDeep(this.files);\n    },\n    flattenedFiles: function flattenedFiles() {\n      return flattenDeep(this.files);\n    },\n    fileNames: function fileNames() {\n      return this.flattenedFiles.map(function (file) {\n        return file.name;\n      });\n    },\n    labelContent: function labelContent() {\n      // Draging active\n\n      /* istanbul ignore next: used by drag/drop which can't be tested easily */\n      if (this.dragging && !this.noDrop) {\n        return (// TODO: Add additional scope with file count, and other not-allowed reasons\n          this.normalizeSlot(SLOT_NAME_DROP_PLACEHOLDER, {\n            allowed: this.dropAllowed\n          }) || (this.dropAllowed ? this.dropPlaceholder : this.$createElement('span', {\n            staticClass: 'text-danger'\n          }, this.noDropPlaceholder))\n        );\n      } // No file chosen\n\n\n      if (this.files.length === 0) {\n        return this.normalizeSlot(SLOT_NAME_PLACEHOLDER) || this.placeholder;\n      }\n\n      var flattenedFiles = this.flattenedFiles,\n          clonedFiles = this.clonedFiles,\n          fileNames = this.fileNames,\n          computedFileNameFormatter = this.computedFileNameFormatter; // There is a slot for formatting the files/names\n\n      if (this.hasNormalizedSlot(SLOT_NAME_FILE_NAME)) {\n        return this.normalizeSlot(SLOT_NAME_FILE_NAME, {\n          files: flattenedFiles,\n          filesTraversed: clonedFiles,\n          names: fileNames\n        });\n      }\n\n      return computedFileNameFormatter(flattenedFiles, clonedFiles, fileNames);\n    }\n  },\n  watch: (_watch = {}, _defineProperty(_watch, MODEL_PROP_NAME, function (newValue) {\n    if (!newValue || isArray(newValue) && newValue.length === 0) {\n      this.reset();\n    }\n  }), _defineProperty(_watch, \"files\", function files(newValue, oldValue) {\n    if (!looseEqual(newValue, oldValue)) {\n      var multiple = this.multiple,\n          noTraverse = this.noTraverse;\n      var files = !multiple || noTraverse ? flattenDeep(newValue) : newValue;\n      this.$emit(MODEL_EVENT_NAME, multiple ? files : files[0] || null);\n    }\n  }), _watch),\n  created: function created() {\n    // Create private non-reactive props\n    this.$_form = null;\n  },\n  mounted: function mounted() {\n    // Listen for form reset events, to reset the file input\n    var $form = closest('form', this.$el);\n\n    if ($form) {\n      eventOn($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n      this.$_form = $form;\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    var $form = this.$_form;\n\n    if ($form) {\n      eventOff($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n    }\n  },\n  methods: {\n    isFileValid: function isFileValid(file) {\n      if (!file) {\n        return false;\n      }\n\n      var accept = this.computedAccept;\n      return accept ? accept.some(function (a) {\n        return a.rx.test(file[a.prop]);\n      }) : true;\n    },\n    isFilesArrayValid: function isFilesArrayValid(files) {\n      var _this = this;\n\n      return isArray(files) ? files.every(function (file) {\n        return _this.isFileValid(file);\n      }) : this.isFileValid(files);\n    },\n    defaultFileNameFormatter: function defaultFileNameFormatter(flattenedFiles, clonedFiles, fileNames) {\n      return fileNames.join(', ');\n    },\n    setFiles: function setFiles(files) {\n      // Reset the dragging flags\n      this.dropAllowed = !this.noDrop;\n      this.dragging = false; // Set the selected files\n\n      this.files = this.multiple ? this.directory ? files : flattenDeep(files) : flattenDeep(files).slice(0, 1);\n    },\n\n    /* istanbul ignore next: used by Drag/Drop */\n    setInputFiles: function setInputFiles(files) {\n      // Try an set the file input files array so that `required`\n      // constraint works for dropped files (will fail in IE11 though)\n      // To be used only when dropping files\n      try {\n        // Firefox < 62 workaround exploiting https://bugzilla.mozilla.org/show_bug.cgi?id=1422655\n        var dataTransfer = new ClipboardEvent('').clipboardData || new DataTransfer(); // Add flattened files to temp `dataTransfer` object to get a true `FileList` array\n\n        flattenDeep(cloneDeep(files)).forEach(function (file) {\n          // Make sure to remove the custom `$path` attribute\n          delete file.$path;\n          dataTransfer.items.add(file);\n        });\n        this.$refs.input.files = dataTransfer.files;\n      } catch (_unused) {}\n    },\n    reset: function reset() {\n      // IE 11 doesn't support setting `$input.value` to `''` or `null`\n      // So we use this little extra hack to reset the value, just in case\n      // This also appears to work on modern browsers as well\n      // Wrapped in try in case IE 11 or mobile Safari crap out\n      try {\n        var $input = this.$refs.input;\n        $input.value = '';\n        $input.type = '';\n        $input.type = 'file';\n      } catch (_unused2) {}\n\n      this.files = [];\n    },\n    handleFiles: function handleFiles(files) {\n      var isDrop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (isDrop) {\n        // When dropped, make sure to filter files with the internal `accept` logic\n        var filteredFiles = files.filter(this.isFilesArrayValid); // Only update files when we have any after filtering\n\n        if (filteredFiles.length > 0) {\n          this.setFiles(filteredFiles); // Try an set the file input's files array so that `required`\n          // constraint works for dropped files (will fail in IE 11 though)\n\n          this.setInputFiles(filteredFiles);\n        }\n      } else {\n        // We always update the files from the `change` event\n        this.setFiles(files);\n      }\n    },\n    focusHandler: function focusHandler(event) {\n      // Bootstrap v4 doesn't have focus styling for custom file input\n      // Firefox has a `[type=file]:focus ~ sibling` selector issue,\n      // so we add a `focus` class to get around these bugs\n      if (this.plain || event.type === 'focusout') {\n        this.hasFocus = false;\n      } else {\n        // Add focus styling for custom file input\n        this.hasFocus = true;\n      }\n    },\n    onChange: function onChange(event) {\n      var _this2 = this;\n\n      var type = event.type,\n          target = event.target,\n          _event$dataTransfer = event.dataTransfer,\n          dataTransfer = _event$dataTransfer === void 0 ? {} : _event$dataTransfer;\n      var isDrop = type === 'drop'; // Always emit original event\n\n      this.$emit(EVENT_NAME_CHANGE, event);\n      var items = arrayFrom(dataTransfer.items || []);\n\n      if (HAS_PROMISE_SUPPORT && items.length > 0 && !isNull(getDataTransferItemEntry(items[0]))) {\n        // Drop handling for modern browsers\n        // Supports nested directory structures in `directory` mode\n\n        /* istanbul ignore next: not supported in JSDOM */\n        getAllFileEntries(items, this.directory).then(function (files) {\n          return _this2.handleFiles(files, isDrop);\n        });\n      } else {\n        // Standard file input handling (native file input change event),\n        // or fallback drop mode (IE 11 / Opera) which don't support `directory` mode\n        var files = arrayFrom(target.files || dataTransfer.files || []).map(function (file) {\n          // Add custom `$path` property to each file (to be consistent with drop mode)\n          file.$path = file.webkitRelativePath || '';\n          return file;\n        });\n        this.handleFiles(files, isDrop);\n      }\n    },\n    onDragenter: function onDragenter(event) {\n      stopEvent(event);\n      this.dragging = true;\n      var _event$dataTransfer2 = event.dataTransfer,\n          dataTransfer = _event$dataTransfer2 === void 0 ? {} : _event$dataTransfer2; // Early exit when the input or dropping is disabled\n\n      if (this.noDrop || this.disabled || !this.dropAllowed) {\n        // Show deny feedback\n\n        /* istanbul ignore next: not supported in JSDOM */\n        dataTransfer.dropEffect = 'none';\n        this.dropAllowed = false;\n        return;\n      }\n      /* istanbul ignore next: not supported in JSDOM */\n\n\n      dataTransfer.dropEffect = 'copy';\n    },\n    // Note this event fires repeatedly while the mouse is over the dropzone at\n    // intervals in the milliseconds, so avoid doing much processing in here\n    onDragover: function onDragover(event) {\n      stopEvent(event);\n      this.dragging = true;\n      var _event$dataTransfer3 = event.dataTransfer,\n          dataTransfer = _event$dataTransfer3 === void 0 ? {} : _event$dataTransfer3; // Early exit when the input or dropping is disabled\n\n      if (this.noDrop || this.disabled || !this.dropAllowed) {\n        // Show deny feedback\n\n        /* istanbul ignore next: not supported in JSDOM */\n        dataTransfer.dropEffect = 'none';\n        this.dropAllowed = false;\n        return;\n      }\n      /* istanbul ignore next: not supported in JSDOM */\n\n\n      dataTransfer.dropEffect = 'copy';\n    },\n    onDragleave: function onDragleave(event) {\n      var _this3 = this;\n\n      stopEvent(event);\n      this.$nextTick(function () {\n        _this3.dragging = false; // Reset `dropAllowed` to default\n\n        _this3.dropAllowed = !_this3.noDrop;\n      });\n    },\n    // Triggered by a file drop onto drop target\n    onDrop: function onDrop(event) {\n      var _this4 = this;\n\n      stopEvent(event);\n      this.dragging = false; // Early exit when the input or dropping is disabled\n\n      if (this.noDrop || this.disabled || !this.dropAllowed) {\n        this.$nextTick(function () {\n          // Reset `dropAllowed` to default\n          _this4.dropAllowed = !_this4.noDrop;\n        });\n        return;\n      }\n\n      this.onChange(event);\n    }\n  },\n  render: function render(h) {\n    var custom = this.custom,\n        plain = this.plain,\n        size = this.size,\n        dragging = this.dragging,\n        stateClass = this.stateClass,\n        bvAttrs = this.bvAttrs; // Form Input\n\n    var $input = h('input', {\n      class: [{\n        'form-control-file': plain,\n        'custom-file-input': custom,\n        focus: custom && this.hasFocus\n      }, stateClass],\n      // With IE 11, the input gets in the \"way\" of the drop events,\n      // so we move it out of the way by putting it behind the label\n      // Bootstrap v4 has it in front\n      style: custom ? {\n        zIndex: -5\n      } : {},\n      attrs: this.computedAttrs,\n      on: {\n        change: this.onChange,\n        focusin: this.focusHandler,\n        focusout: this.focusHandler,\n        reset: this.reset\n      },\n      ref: 'input'\n    });\n\n    if (plain) {\n      return $input;\n    } // Overlay label\n\n\n    var $label = h('label', {\n      staticClass: 'custom-file-label',\n      class: {\n        dragging: dragging\n      },\n      attrs: {\n        for: this.safeId(),\n        // This goes away in Bootstrap v5\n        'data-browse': this.browseText || null\n      }\n    }, [h('span', {\n      staticClass: 'd-block form-file-text',\n      // `pointer-events: none` is used to make sure\n      // the drag events fire only on the label\n      style: {\n        pointerEvents: 'none'\n      }\n    }, [this.labelContent])]); // Return rendered custom file input\n\n    return h('div', {\n      staticClass: 'custom-file b-form-file',\n      class: [_defineProperty({}, \"b-custom-control-\".concat(size), size), stateClass, bvAttrs.class],\n      style: bvAttrs.style,\n      attrs: {\n        id: this.safeId('_BV_file_outer_')\n      },\n      on: {\n        dragenter: this.onDragenter,\n        dragover: this.onDragover,\n        dragleave: this.onDragleave,\n        drop: this.onDrop\n      }\n    }, [$input, $label]);\n  }\n});"]},"metadata":{},"sourceType":"module"}